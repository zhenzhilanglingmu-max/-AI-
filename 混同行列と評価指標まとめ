# 🎯 混同行列と評価指標まとめ

## 🧩 混同行列（Confusion Matrix）

| 実際＼予測 | 陽性（Positive） | 陰性（Negative） |
|-------------|-----------------|-----------------|
| **陽性（Positive）** | **TP（True Positive）**<br>正しく陽性と予測 | **FN（False Negative）**<br>見逃し |
| **陰性（Negative）** | **FP（False Positive）**<br>誤って陽性と予測 | **TN（True Negative）**<br>正しく陰性と予測 |

---

## ⚙️ 指標の定義

| 指標 | 式 | 意味 |
|------|----|------|
| **適合率（Precision）** | `TP / (TP + FP)` | 予測で陽性とした中で、実際に陽性だった割合（＝予測の正確さ） |
| **再現率（Recall）** | `TP / (TP + FN)` | 実際に陽性だった中で、正しく陽性と予測できた割合（＝見逃しの少なさ） |
| **正解率（Accuracy）** | `(TP + TN) / (TP + FP + FN + TN)` | 全体のうち正しく予測できた割合 |
| **F1スコア** | `2 × (Precision × Recall) / (Precision + Recall)` | 適合率と再現率のバランスを取った評価値 |

---

## 🧮 計算例

- TP = 30  
- FP = 10  
- FN = 10  
Precision = 30 ÷ (30 + 10) = 30 ÷ 40 = 0.75
Recall = 30 ÷ (30 + 10) = 30 ÷ 40 = 0.75
F1 = 2 × (0.75 × 0.75) ÷ (0.75 + 0.75)
= 0.75


👉 **Precision = 75%**, **Recall = 75%**, **F1 = 75%**

---

## 🧠 イメージまとめ

| 指標 | 重視する点 | 使われる場面 |
|------|-------------|---------------|
| **Precision（適合率）** | 誤報（FP）を減らす | スパム検出・誤診を避けたい場合 |
| **Recall（再現率）** | 見逃し（FN）を減らす | 医療・安全検知など、見逃しNGな場合 |
| **F1スコア** | 両者のバランス | モデル全体の性能比較 |

---

## ⚖️ トレードオフの考え方

- **しきい値を下げる** → Recall↑（見逃し減）・Precision↓（誤報増）  
- **しきい値を上げる** → Precision↑（正確）・Recall↓（見逃し増）  

→ モデルの目的に合わせて「どちらを優先するか」を決める。

---

✍️ **まとめ**
> Precision：陽性って言った中の当たり率  
> Recall：ホンマに陽性をどれだけ拾えたか  
> F1：両方のバランス  
>  
> → **カッコを忘れずに！**  
> `TP ÷ (TP + FP)` と `TP ÷ (TP + FN)` が基本！



